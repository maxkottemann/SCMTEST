<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project View</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Sidebar / Navigation -->
    <nav>
    <img src="img/logo-1.png" class="mainimg">
    <a class="menuitem" href="index.html">Dashboard</a>
    <a class="menuitem" href="projecten.html">Projecten</a>
    <a class="menuitemactive" href="wasstatus.html">Was Status</a>
    <a class="menuitem" href="ziekenhuisdashboard.html">Klantdashboard</a>
    <a class="menuitem" href="#">Settings</a>
  </nav>

    <!-- Main content -->
    <main class="fadein">
        <!-- Topbar -->
        <div class="topbar">
            <h2 class="topbartext">Was Status</h2>
            <input placeholder="Zoek Project..." class="searchbar">
            <div class="loggedin-container">
                <div class="loggedinbox">
                    <img class="smallimage" src="img/avatar.png" alt="User avatar">
                    <h3 class="topbartextsmall">Admin</h3>
                </div>
                <div class="dropdownmenu">
                    <a href="#">Profiel</a>
                    <a href="#">Instellingen</a>
                    <a href="#">Uitloggen</a>
                </div>
            </div>
        </div>

        <!-- Tabs for Wagen 1–5 -->
        <div class="wagen-tabs">
            <button class="tab-button active" data-wagen="1">Wagen 1</button>
            <button class="tab-button" data-wagen="2">Wagen 2</button>
            <button class="tab-button" data-wagen="3">Wagen 3</button>
            <button class="tab-button" data-wagen="4">Wagen 4</button>
            <button class="tab-button" data-wagen="5">Wagen 5</button>
        </div>

        <!-- Wagen content sections -->
        <div class="wagen-content">
            <div class="room-tracker" id="rooms-wagen-1">
                <h2 class="headertext">Actief Project: AMC Verdieping 2</h2>
                <div class="table-container margin2">
                    <table class="cardtable">
                        <thead>
                            <tr>
                                <th>Kamer</th>
                                <th>Status</th>
                                <th>Opmerkingen</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="completedrow">
                                <td>101</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>102</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>103</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>104</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>105</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>106</td>
                                <td><p class="uncompletedtext">Niet Uitgevoerd</p></td>
                                <td>Patient Ziek</td>
                            </tr>
                            <tr class="completedrow">
                                <td>107</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>108</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>109</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>110</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>111</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>112</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                            <tr class="completedrow">
                                <td>113</td>
                                <td><p class="completedtext">Gewassen</p></td>
                                <td>Geen</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

<div class="kpi-grid marginsides1">
    <div class="cardfitcontent statcardheight">
        <h3 class="">Voortgang</h3>
        <div class="piechart-container center">
            <div class="piechart-canvas">
                <canvas id="wagen1-piechart"></canvas>
            </div>
            <div class="piechart-legend">
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #2563eb;"></span>
                    <span class="legend-label">Gewassen</span>
                    <span id="gewassen-value" class="legend-value"></span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: #ef4444;"></span>
                    <span class="legend-label">Nog Te Doen</span>
                   <span id="nog-te-doen-value" class="legend-value"></span>
                </div>
            </div>
        </div>
    </div>
    <div class="cardfitcontent statcardheight">
        <h3>Distributie</h3>
           <div class="piechart-container center">
            <div class="piechart-canvas">
                <canvas id="wagen1-piechart2"></canvas>
            </div>
            <div class="piechart-legend">
                <div class="legend-item">
                    <span class="legend-color" id="legend-color-Gordijn"></span>
                    <span class="legend-label">Gordijn</span>
                    <span id="gordijnlegend" class="legend-value"></span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" id="legend-color-Vitrage"></span>
                    <span class="legend-label">Vitrage</span>
                    <span id="vitragelegend"class="legend-value"></span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" id="legend-color-Bedgordijn"></span>
                    <span class="legend-label">Bedgordijn</span>
                    <span id="bedgordijnlegend"class="legend-value"></span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" id="legend-color-Douchegordijn"></span>
                    <span class="legend-label">Douchegordijn</span>
                    <span id="douchegordijnlegend" class="legend-value"></span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="cardfitcontent statcardheight">
        <h2>Medewerkers</h2>
    <ul class="cardul">
        <li class="cardlistitem">Mark Smit</li>
         <li class="cardlistitem">Jan Janssen</li>
          <li class="cardlistitem">Richard de Jong</li>
    </ul>
    <h2>Contact Persoon</h2>
    <ul class="cardul">
         <li class="cardlistitem">Michelle van Dijk</li>
          <li class="cardlistitem">06 12 34 56 78</li>
    </ul>
    </div>
</div>

        
            

            <div class="cardfitcontent marginsides1">
                <h3>Productiviteit</h3>
                <div class="productivity-chart">
                    <canvas id="daily-productivity"></canvas>
                </div>
                <div class="productivity-chart">
                    <canvas id="weekly-productivity"></canvas>
                </div>
            </div>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Data
        const dailyData = {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            values: [120, 150, 100, 180, 200, 170, 130]
        };

        const weeklyData = {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
            values: [850, 920, 780, 1050, 980, 890]
        };

        // Daily Chart
        const ctx = document.getElementById('daily-productivity').getContext('2d');
        const dailyProductivityChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: dailyData.labels,
                datasets: [{
                    label: 'm² per dag',
                    data: dailyData.values,
                    fill: false,
                    borderColor: '#2563eb',
                    backgroundColor: '#2563eb',
                    tension: 0.3,
                    pointRadius: 5,
                    pointHoverRadius: 7
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'm² per dag'
                        },
                        beginAtZero: true
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Dag'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.parsed.y + ' m²';
                            }
                        }
                    }
                }
            }
        });

        // Weekly Chart - FIXED ID
        const ctx2 = document.getElementById('weekly-productivity').getContext('2d');
        const weeklyProductivityChart = new Chart(ctx2, {
            type: 'line',
            data: {
                labels: weeklyData.labels,
                datasets: [{
                    label: 'm² per week',
                    data: weeklyData.values,
                    fill: false,
                    borderColor: '#10b981',
                    backgroundColor: '#10b981',
                    tension: 0.3,
                    pointRadius: 5,
                    pointHoverRadius: 7
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        title: {
                            display: true,
                            text: 'm² per week'
                        },
                        beginAtZero: true
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Week'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.parsed.y + ' m²';
                            }
                        }
                    }
                }
            }
        });
        let myChart;
function fillChart() {
  const data = [
    { gewassen: true },
    { gewassen: true },
    { gewassen: true },
    { gewassen: false },
    { gewassen: false },
  ];

  const trueCount = data.filter(f => f.gewassen).length;
  const falseCount = data.filter(f => !f.gewassen).length;
  const dataValues = [trueCount, falseCount];

  document.querySelector('.piechart-legend .legend-item:nth-child(1) .legend-value').innerText = ((trueCount / data.length) * 100).toFixed(1) + '%';
  document.querySelector('.piechart-legend .legend-item:nth-child(2) .legend-value').innerText = ((falseCount / data.length) * 100).toFixed(1) + '%';

  if (myChart) {
    myChart.data.datasets[0].data = dataValues;
    myChart.update();
  } else {
    const ctx = document.getElementById('wagen1-piechart').getContext('2d');
    myChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Gewassen', 'Nog Te Doen'],
        datasets: [{ data: dataValues, backgroundColor: ['#2563eb', '#ef4444'] }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: function(context) {
                const dataset = context.dataset.data;
                const total = dataset.reduce((a, b) => a + b, 0);
                const percent = ((context.parsed / total) * 100).toFixed(1);
                return context.label + ': ' + percent + '%';
              }
            }
          }
        }
      }
    });
  }
}

let myChart2;
function fillChart2() {
  const data = [
    { product_type: 'Gordijn',       aantal: 40 },
    { product_type: 'Vitrage',       aantal: 25 },
    { product_type: 'Douchegordijn', aantal: 20 },
    { product_type: 'Bedgordijn',    aantal: 15 },
  ];

  data.sort((a, b) => b.aantal - a.aantal);

  const labels  = data.map(d => d.product_type);
  const amounts = data.map(d => d.aantal);
  const total   = amounts.reduce((a, b) => a + b, 0) || 1;

  const COLORS = {
    Douchegordijn: '#2563eb',
    Bedgordijn:    '#ef4444',
    Vitrage:       '#10b981',
    Gordijn:       '#f59e0b'
  };

  const colors = labels.map(l => COLORS[l]);

  data.forEach(item => {
    const percent  = ((item.aantal / total) * 100).toFixed(1) + '%';
    const valueEl  = document.getElementById(`${item.product_type.toLowerCase()}legend`);
    if (valueEl) valueEl.innerText = percent;

    const colorEl  = document.getElementById(`legend-color-${item.product_type}`);
    if (colorEl) colorEl.style.backgroundColor = COLORS[item.product_type];
  });

  if (myChart2) {
    myChart2.data.labels = labels;
    myChart2.data.datasets[0].data = amounts;
    myChart2.data.datasets[0].backgroundColor = colors;
    myChart2.update();
  } else {
    const ctx = document.getElementById('wagen1-piechart2').getContext('2d');
    myChart2 = new Chart(ctx, {
      type: 'pie',
      data: {
        labels,
        datasets: [{ data: amounts, backgroundColor: colors }]
      },
      options: {
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: ctx => {
                const dataset = ctx.chart.data.datasets[0].data;
                const total   = dataset.reduce((a, b) => a + b, 0);
                const percent = ((ctx.parsed / total) * 100).toFixed(1);
                return `${ctx.label}: ${percent}%`;
              }
            }
          }
        }
      }
    });
  }
}

fillChart();
fillChart2();
  </script>

</body>

</html>

